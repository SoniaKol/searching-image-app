{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { list } from '../main';\n\nconst downloaderContainer = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.img-card a');\n\nfunction createMarkUp(arr) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL: img,\n        largeImageURL: originalImg,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"img-card\">\n      <a class=\"img-card-link\" href=\"${originalImg}\"><img src=\"${img}\" alt=\"${tags}\" class=\"img-card-image\" /></a>\n        <ul class=\"img-card-container\">\n          <li class=\"img-card-descr\">\n            <h4 class=\"img-card-descr-title\">Likes</h4>\n            <p class=\"img-card-descr-text\">${likes}</p>\n          </li>\n          <li class=\"img-card-descr\">\n            <h4 class=\"img-card-descr-title\">Views</h4>\n            <p class=\"img-card-descr-text\">${views}</p>\n          </li>\n          <li class=\"img-card-descr\">\n            <h4 class=\"img-card-descr-title\">Comments</h4>\n            <p class=\"img-card-descr-text\">${comments}</p>\n          </li>\n          <li class=\"img-card-descr\">\n            <h4 class=\"img-card-descr-title\">Downloads</h4>\n            <p class=\"img-card-descr-text\">${downloads}</p>\n          </li>\n        </ul>\n      </li>`\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction loaderVisibly() {\n  downloaderContainer.style.visibility = 'visible';\n}\n\nfunction loaderHidden() {\n  downloaderContainer.style.visibility = 'hidden';\n}\n\nfunction btnVisibly(btn) {\n  btn.style.display = 'flex';\n}\n\nfunction textVisibly(txt) {\n  txt.style.display = 'block';\n}\n\nfunction elementHidden(el) {\n  el.style.display = 'none';\n}\n\nexport {\n  createMarkUp,\n  loaderVisibly,\n  loaderHidden,\n  elementHidden,\n  btnVisibly,\n  textVisibly,\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport { button, text } from '../main.js';\nimport { loaderHidden, elementHidden } from './render-functions.js';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '44792163-757e44859b12a96dc64963414';\n\nasync function getImg({ q = '', page = 1, per_page = 15 } = {}) {\n  return (\n    await axios.get(BASE_URL, {\n      params: {\n        key: KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page,\n      },\n    })\n  ).data;\n}\n\nfunction checkResult(arr) {\n  if (arr.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n      position: 'topRight',\n    });\n    loaderHidden();\n    elementHidden(button);\n    elementHidden(text);\n    return;\n  }\n\n  return true;\n}\n\nexport { getImg, checkResult };\n","import 'modern-normalize/modern-normalize.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImg, checkResult } from './js/pixabay-api';\nimport {\n  createMarkUp,\n  loaderVisibly,\n  loaderHidden,\n  elementHidden,\n  btnVisibly,\n  textVisibly,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.img-list');\nconst button = document.querySelector('.load-button');\nconst text = document.querySelector('.load-text');\n\nform.addEventListener('submit', formHandler);\nbutton.addEventListener('click', loadMoreHandler);\n\nelementHidden(button);\nelementHidden(text);\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nasync function formHandler(evt) {\n  evt.preventDefault();\n\n  list.innerHTML = '';\n  params.page = 1;\n\n  params.q = evt.currentTarget.elements.input.value.trim();\n\n  if (!params.q) return;\n\n  loaderVisibly();\n\n  try {\n    const { hits, totalHits } = await getImg(params);\n    params.maxPage = Math.ceil(totalHits / params.per_page);\n\n    if (checkResult(hits)) {\n      loaderHidden();\n      createMarkUp(hits);\n    }\n    if (params.maxPage > 1) {\n      btnVisibly(button);\n    }\n  } catch (err) {\n    console.log(err);\n    iziToast.show({\n      message: `We're sorry, but something went wrong. Please try again.`,\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nasync function loadMoreHandler() {\n  params.page += 1;\n  elementHidden(button);\n  textVisibly(text);\n  try {\n    const { hits } = await getImg(params);\n\n    if (checkResult(hits)) {\n      elementHidden(text);\n      createMarkUp(hits);\n\n      const imgCard = document.querySelector('.img-card');\n      const imgCardHeight = imgCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: imgCardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n    if (params.maxPage > 1) {\n      btnVisibly(button);\n    }\n    if (params.page === params.maxPage) {\n      elementHidden(button);\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        color: 'blue',\n        position: 'bottomRight',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n    iziToast.show({\n      message: `We're sorry, but something went wrong. Please try again.`,\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nexport { list, button, text };\n"],"names":["downloaderContainer","lightbox","SimpleLightbox","createMarkUp","arr","markup","img","originalImg","tags","likes","views","comments","downloads","list","loaderVisibly","loaderHidden","btnVisibly","btn","textVisibly","txt","elementHidden","el","BASE_URL","KEY","getImg","q","page","per_page","axios","checkResult","iziToast","button","text","form","formHandler","loadMoreHandler","params","evt","hits","totalHits","err","imgCardHeight"],"mappings":"owBAIA,MAAMA,EAAsB,SAAS,cAAc,SAAS,EACtDC,EAAW,IAAIC,EAAe,aAAa,EAEjD,SAASC,EAAaC,EAAK,CACzB,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAcE,EACd,cAAeC,EACf,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,uCAC+BL,CAAW,eAAeD,CAAG,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,6CAIrCC,CAAK;AAAA;AAAA;AAAA;AAAA,6CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6CAIRC,CAAS;AAAA;AAAA;AAAA,YAIjD,EACA,KAAK,EAAE,EAEVC,EAAK,mBAAmB,YAAaR,CAAM,EAC3CJ,EAAS,QAAO,CAClB,CAEA,SAASa,GAAgB,CACvBd,EAAoB,MAAM,WAAa,SACzC,CAEA,SAASe,GAAe,CACtBf,EAAoB,MAAM,WAAa,QACzC,CAEA,SAASgB,EAAWC,EAAK,CACvBA,EAAI,MAAM,QAAU,MACtB,CAEA,SAASC,EAAYC,EAAK,CACxBA,EAAI,MAAM,QAAU,OACtB,CAEA,SAASC,EAAcC,EAAI,CACzBA,EAAG,MAAM,QAAU,MACrB,CC3DA,MAAMC,EAAW,2BACXC,EAAM,qCAEZ,eAAeC,EAAO,CAAE,EAAAC,EAAI,GAAI,KAAAC,EAAO,EAAG,SAAAC,EAAW,EAAI,EAAG,GAAI,CAC9D,OACE,MAAMC,EAAM,IAAIN,EAAU,CACxB,OAAQ,CACN,IAAKC,EACL,EAAAE,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACD,CACP,CAAK,GACD,IACJ,CAEA,SAASE,EAAYzB,EAAK,CACxB,GAAIA,EAAI,SAAW,EAAG,CACpB0B,EAAS,KAAK,CACZ,QACE,2EACF,MAAO,MACP,SAAU,UAChB,CAAK,EACDf,IACAK,EAAcW,CAAM,EACpBX,EAAcY,CAAI,EAClB,MACD,CAED,MAAO,EACT,CC3BA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCpB,EAAO,SAAS,cAAc,WAAW,EACzCkB,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAO,SAAS,cAAc,YAAY,EAEhDC,EAAK,iBAAiB,SAAUC,CAAW,EAC3CH,EAAO,iBAAiB,QAASI,CAAe,EAEhDf,EAAcW,CAAM,EACpBX,EAAcY,CAAI,EAElB,MAAMI,EAAS,CACb,EAAG,GACH,KAAM,EACN,SAAU,GACV,QAAS,CACX,EAEA,eAAeF,EAAYG,EAAK,CAQ9B,GAPAA,EAAI,eAAc,EAElBxB,EAAK,UAAY,GACjBuB,EAAO,KAAO,EAEdA,EAAO,EAAIC,EAAI,cAAc,SAAS,MAAM,MAAM,OAE9C,EAACD,EAAO,EAEZ,CAAAtB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAwB,EAAM,UAAAC,CAAS,EAAK,MAAMf,EAAOY,CAAM,EAC/CA,EAAO,QAAU,KAAK,KAAKG,EAAYH,EAAO,QAAQ,EAElDP,EAAYS,CAAI,IAClBvB,IACAZ,EAAamC,CAAI,GAEfF,EAAO,QAAU,GACnBpB,EAAWe,CAAM,CAEpB,OAAQS,EAAK,CACZ,QAAQ,IAAIA,CAAG,EACfV,EAAS,KAAK,CACZ,QAAS,2DACT,MAAO,MACP,SAAU,UAChB,CAAK,CACL,QAAY,CACRG,EAAK,MAAK,CACX,EACH,CAEA,eAAeE,GAAkB,CAC/BC,EAAO,MAAQ,EACfhB,EAAcW,CAAM,EACpBb,EAAYc,CAAI,EAChB,GAAI,CACF,KAAM,CAAE,KAAAM,CAAM,EAAG,MAAMd,EAAOY,CAAM,EAEpC,GAAIP,EAAYS,CAAI,EAAG,CACrBlB,EAAcY,CAAI,EAClB7B,EAAamC,CAAI,EAGjB,MAAMG,EADU,SAAS,cAAc,WAAW,EACpB,sBAAqB,EAAG,OACtD,OAAO,SAAS,CACd,IAAKA,EAAgB,EACrB,SAAU,QAClB,CAAO,CACF,CACGL,EAAO,QAAU,GACnBpB,EAAWe,CAAM,EAEfK,EAAO,OAASA,EAAO,UACzBhB,EAAcW,CAAM,EACpBD,EAAS,KAAK,CACZ,QAAS,6DACT,MAAO,OACP,SAAU,aAClB,CAAO,EAEJ,OAAQU,EAAK,CACZ,QAAQ,IAAIA,CAAG,EACfV,EAAS,KAAK,CACZ,QAAS,2DACT,MAAO,MACP,SAAU,UAChB,CAAK,CACL,QAAY,CACRG,EAAK,MAAK,CACX,CACH"}